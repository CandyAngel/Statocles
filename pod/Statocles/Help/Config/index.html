<!DOCTYPE html>
<html>
    <head>
        <link href="/Statocles/theme/css/normalize.css" rel="stylesheet">
        <link href="/Statocles/theme/css/skeleton.css" rel="stylesheet">
        <link href="/Statocles/theme/css/statocles-default.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <title>Statocles</title>
        <meta content="Statocles 0.056" name="generator">
        <link href="http://fonts.googleapis.com/css?family=Forum" rel="stylesheet" type="text/css">
<style>
    h1, h2, h3, h4, h5, h6 {
        font-family: 'Forum', sans-serif;
        font-weight: bold;
    }

    #index-banner {
        font-family: 'Forum', sans-serif;
        height: 300px;
        position: relative;
        margin-bottom: 1em;
        border-bottom: 1px solid #777
    }
    #index-banner:before, #index-banner:after {
        width: 60px;
        height: 300px;
        content: url(http://preaction.me/statocles//theme/images/column.png);
    }
    #index-banner:before {
        position: absolute;
        top: 0;
        left: 0;
    }
    #index-banner:after {
        position: absolute;
        top: 0;
        right: 0;
    }

    #index-banner h1 {
        padding-top: 1em;
        text-transform: uppercase;
        font-size: 72px;
        text-align: center;
    }
    #index-banner h1 small {
        display: block;
        font-size: 24px;
    }

    #index-banner .latest-release {
        text-align: center;
    }

</style>
<link href="http://preaction.me/statocles//pod/Statocles/Help/Config/index.html" rel="canonical">
<script>
    if ( location.href.indexOf( "http://preaction.me/statocles" ) == -1 ) {
        location.href = "http://preaction.me/statocles//pod/Statocles/Help/Config/index.html";
    }
</script>

    </head>
    <body>
        <header>
            <nav class="navbar">
                <div class="container">
                    <a class="brand" href="/Statocles/">Statocles</a>
                    <ul>
                        <li>
                            <a href="/Statocles/blog">Blog</a>
                        </li>
                        <li>
                            <a href="/Statocles/pod">Docs</a>
                        </li>
                        <li>
                            <a href="/Statocles/gallery">Gallery</a>
                        </li>
                        <li>
                            <a href="http://github.com/preaction/Statocles">Code</a>
                        </li>
                        <li>
                            <a href="http://github.com/preaction/Statocles/issues">Bugs</a>
                        </li>
                        <li>
                            <a href="http://metacpan.org/pod/Statocles">CPAN</a>
                        </li>
                        <li>
                            <a href="https://chat.mibbit.com/?channel=%23statocles&amp;server=irc.perl.org">IRC</a>
                        </li>
                    </ul>
                    
                </div>
            </nav>
            <a href="https://github.com/preaction/Statocles"><img alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" style="position: absolute; top: 0; right: 0; z-index: 1000; border: 0;"></a>

        </header>
        <div class="main container">
            <div class="crumbtrail">
<ul>
    <li>
        <a href="/Statocles/pod/Statocles/">Statocles</a>
    </li>
    <li>
        <a href="/Statocles/pod/">Help</a>
    </li>
    <li>
        <a href="/Statocles/pod/Statocles/Help/Config/">Config</a>
    </li>
</ul>
(<a href="/Statocles/pod/Statocles/Help/Config/source.html">source</a>)
</div>
<h1 id="NAME">NAME</h1>

<p>Statocles::Help::Config - A guide to configuring a Statocles site</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This document describes how to set up a simple blog web site suitable to be deployed to GitHub Pages using Statocles.</p>

<p>This document explains how to build a configuration file without using the <code>statocles create</code> command.</p>

<h1 id="Building-site.yml---The-Main-Configuration-File">Building site.yml - The Main Configuration File</h1>

<p>Statocles uses <a href="https://metacpan.org/pod/Beam::Wire" rel="external">Beam::Wire</a>, a dependency-injection module, for configuration. The format is <a href="http://yaml.org" rel="external">YAML</a> and contains the data needed to build the objects: Arguments to the object&#39;s constructor. This means that any <code>ATTRIBUTES</code> defined in the documentation can be used in the configuration file.</p>

<p>The configuration file is, by default, called <code>site.yml</code>. See <a href="https://metacpan.org/pod/statocles" rel="external">the statocles command documentation</a> if you want to have multiple site configuration files.</p>

<h2 id="A-Source">A Source</h2>

<p>Statocles takes simple, YAML-and-Markdown-formatted <a href="/Statocles/pod/Statocles/Document/">document</a> files and builds HTML pages out of them.</p>

<p>So we need a place to put our source documents. A <a href="/Statocles/pod/Statocles/Store/">store</a> fills multiple roles relating to reading and writing files. Right now, we need it to hold on to our blog posts. We&#39;ll put our blog posts in the <code>blog</code> directory.</p>

<pre><code>    $ mkdir blog</code></pre>

<p>The <a href="/Statocles/pod/Statocles/App/Blog/">blog application</a> will use this store to add new blog posts and build web pages from the documents in the <code>blog</code> directory. More on that later.</p>

<h2 id="An-App">An App</h2>

<p>A <a href="/Statocles/pod/Statocles/App/">Statocles app</a> is the driver that turns documents into <a href="/Statocles/pod/Statocles/Page/">pages</a>. To build pages, we need a store full of documents. We define our store with the string <code>blog</code>, which will get magically coerced into a <a href="/Statocles/pod/Statocles/Store/">store object</a>.</p>

<p>Since we&#39;re building a blog site, we&#39;ll use the <a href="/Statocles/pod/Statocles/App/Blog/">Statocles blog app</a>:</p>

<pre><code>    # site.yml
    blog_app:
        class: Statocles::App::Blog
        args:
            url_root: /blog
            store: &#39;blog&#39;</code></pre>

<p>We put our blog app under the root URL <code>/blog</code>. All pages that come from this app will start with <code>/blog</code> (except the index page, we&#39;ll move that to <code>/</code>, later).</p>

<h2 id="A-Deploy">A Deploy</h2>

<p>To deploy our site to Github, we need to build a <a href="/Statocles/pod/Statocles/Deploy/">deploy object</a> for Git repositories using <a href="/Statocles/pod/Statocles/Deploy/Git/">Statocles::Deploy::Git</a>. Our deploy object will copy our built pages into the Git repository and commit them. Our deploy will happen in the root directory of our site on the <code>gh-pages</code> branch.</p>

<pre><code>    # site.yml
    github_deploy:
        class: Statocles::Deploy::Git
        args:
            branch: gh-pages</code></pre>

<p>Though we are going to deploy to Git, we could also deploy to SFTP or FTP or transfer the pages to a CDN. See <a href="/Statocles/pod/Statocles/Help/Deploy/">Statocles::Help::Deploy</a> for more information.</p>

<h2 id="A-Theme">A Theme</h2>

<p>We could set up a theme (<a href="/Statocles/pod/Statocles/Theme/">Statocles::Theme</a>) to change how our site looks, but for now, we&#39;ll use the <code>default</code> theme included with Statocles. See <a href="/Statocles/pod/Statocles/Help/Theme/">Statocles::Help::Theme</a> for information on how to change and customize your theme.</p>

<h2 id="A-Site">A Site</h2>

<p>Now that we&#39;re ready, we can tie it all together. A <a href="/Statocles/pod/Statocles/Site/">site</a> is a collection of apps that build and deploy to the same place.</p>

<pre><code>    # site.yml
    site:
        class: Statocles::Site
        args:
            apps:
                blog:
                    $ref: blog_app
            deploy:
                $ref: github_deploy
            title: My Site
            index: /blog
            nav:
                main:
                    - title: Blog
                      href: /</code></pre>

<p>When adding apps to our site, we give them a name (in this case <code>blog</code>) so that we can refer to them on the command-line (later).</p>

<p>As part of the default template, we can provide a site <code>title</code>.</p>

<p>The <code>index</code> attribute gives the path to the page to use as our index page. Since the blog&#39;s <code>url_root</code> is <code>/blog</code>, this will move the main blog page to the main site index <code>/</code>.</p>

<p>Finally, we can define a <code>nav</code> list, again giving a name: <code>main</code>. The default template uses the <code>main</code> nav across the top.</p>

<h2 id="The-Complete-site.yml">The Complete site.yml</h2>

<p>Combine it all together and you get this. Feel free to copy and paste to start your own site.</p>

<pre><code>    # site.yml
    blog_app:
        class: Statocles::App::Blog
        args:
            url_root: /blog
            store: &#39;blog&#39;

    github_deploy:
        class: Statocles::Deploy::Git
        args:
            branch: gh-pages

    site:
        class: Statocles::Site
        args:
            apps:
                blog:
                    $ref: blog_app
            deploy:
                $ref: github_deploy
            title: My Site
            index: /blog
            nav:
                main:
                    - title: Blog
                      href: /</code></pre>

<p><b>NOTE:</b> One of the most useful things about using a dependency injection module is that you can easily plug-in your own classes. If you want to use your own template format, you can build your own Statocles::Theme class that provides a different kind of Statocles::Template object and use that instead. If you want to use your own document format, you can make your own Statocles::Store class that reads from a database.</p>

<h1 id="The-statocles-Command">The <code>statocles</code> Command</h1>

<p>Now that we have a <code>site.yml</code>, we can run the <a href="https://metacpan.org/pod/statocles" rel="external">statocles</a> command to manage our site.</p>

<p>See <a href="/Statocles/pod/Statocles/Help/Content/">Statocles::Help::Content</a> for more information about editing the site&#39;s content.</p>

<h1 id="Adding-More-Apps">Adding More Apps</h1>

<p>In addition to our blog app, we also want to add some plain Markdown content, and some images.</p>

<h2 id="Basic-Pages">Basic Pages</h2>

<p>For basic pages with no structure or extras, there is the <a href="/Statocles/pod/Statocles/App/Basic/">basic app: Statocles::App::Basic</a>. The basic app takes the same YAML-and-Markdown-formatted documents as the blog app and creates HTML pages, without the lists, tags, and feeds the blog generates.</p>

<p>Like the blog, we need a store to find our documents. This time, we&#39;ll use the root directory of our repository, <code>.</code>. Finally, we&#39;ll need a URL root. Since we&#39;re using the root directory for our documents, we&#39;ll use the root URL for our destination <code>/</code>.</p>

<pre><code>    # site.yml
    basic_app:
        class: Statocles::App::Basic
        args:
            url_root: &#39;/&#39;
            store: &#39;.&#39;</code></pre>

<p>Now we just need to add this app to our site, but before we do, we&#39;ll create an app for our static files.</p>

<h2 id="Static-Files">Static Files</h2>

<p>Lastly, we wanted a place to put any file at all. No processing. No templates. Just a simple copy from one store to another. For this one, we&#39;ll put everything in the <code>/static</code> directory, and give a URL root to match.</p>

<pre><code>    # site.yml
    static_app:
        class: Statocles::App::Static
        args:
            url_root: &#39;/static&#39;
            store: &#39;static&#39;</code></pre>

<h2 id="Add-the-New-Apps">Add the New Apps</h2>

<p>To enable the new apps, we just need to add them to the site&#39;s <code>apps</code>.</p>

<pre><code>    # site.yml
    site:
        class: Statocles::Site
        args:
            apps:
                blog:
                    $ref: blog_app
                basic:
                    $ref: basic_app
                static:
                    $ref: static_app
            deploy:
                $ref: github_deploy
            title: My Site
            index: /blog
            nav:
                main:
                    - title: Blog
                      href: /</code></pre>

<h2 id="Add-Basic-Content">Add Basic Content</h2>

<p>Now, we just need some content for our basic app to deploy. The basic app uses the same format as the blog, so we need a YAML header followed by some Markdown content:</p>

<p>Create a file named <code>about.markdown</code> with the following content:</p>

<pre><code>    ---
    title: About
    ---
    # About Me

    This is a personal website!</code></pre>

<p>Then, run <code>statocles daemon</code> to test the new page.</p>

<p>Now we should probably make a link in our main nav to the new about page:</p>

<pre><code>    # site.yml
    site:
        class: Statocles::Site
        args:
            apps:
                blog:
                    $ref: blog_app
                basic:
                    $ref: basic_app
                static:
                    $ref: static_app
            deploy:
                $ref: github_deploy
            title: My Site
            index: /blog
            nav:
                main:
                    - title: Blog
                      href: /
                    - title: About
                      href: /about.html</code></pre>

<p>Now, if we run <code>statocles build</code> again, we can see the link in our header.</p>

<h2 id="The-Complete-site.yml---With-More-Apps">The Complete site.yml - With More Apps</h2>

<p>Along with the blog app and our other settings, here is our new, complete site.yml:</p>

<pre><code>    # site.yml
    blog_app:
        class: Statocles::App::Blog
        args:
            url_root: /blog
            store: &#39;blog&#39;

    basic_app:
        class: Statocles::App::Basic
        args:
            url_root: &#39;/&#39;
            store: &#39;.&#39;

    static_app:
        class: Statocles::App::Static
        args:
            url_root: &#39;/static&#39;
            store: &#39;static&#39;

    github_deploy:
        class: Statocles::Deploy::Git
        args:
            branch: gh-pages

    site:
        class: Statocles::Site
        args:
            apps:
                blog:
                    $ref: blog_app
                basic:
                    $ref: basic_app
                static:
                    $ref: static_app

            deploy:
                $ref: github_deploy

            title: My Site
            index: /blog
            nav:
                main:
                    - title: Blog
                      href: /
                    - title: About
                      href: /about.html</code></pre>

<p>If we&#39;re satisfied with our new About page, we can deploy our site with <code>statocles deploy</code>.</p>

<h1 id="DEFAULT-THEME-FEATURES">DEFAULT THEME FEATURES</h1>

<p>There are special features built-in to all default themes that can be enabled by adding <code>data</code> sections to the site object or app objects.</p>

<dl>

<dt>Disqus</dt>
<dd>

<p>Disqus is a free, hosted comment system that can be easily added to static sites to provide some user interaction.</p>

<p>To add <a href="http://disqus.com" rel="external">Disqus comments</a> to your blog, add your Disqus shortname (from <code>http://YOUR_NAME.disqus.com/admin</code>) to the site data, like so:</p>

<pre><code>    # site.yml
    site:
        class: Statocles::Site
        args:
            # ...
            data:
                disqus:
                    shortname: &#39;YOUR_NAME&#39;</code></pre>

<p>This will add a comments section to the bottom of your blog posts, and show the number of comments in the blog list pages.</p>

<ul>

<li><p><a href="https://help.disqus.com/customer/portal/articles/466208" rel="external">What is a short name?</a></p>

</li>
<li><p><a href="https://disqus.com/admin/signup/" rel="external">Sign up for Disqus</a></p>

</li>
</ul>

</dd>
</dl>

<h1 id="ADVANCED-CONFIGURATION">ADVANCED CONFIGURATION</h1>

<p>The configuration file is a <a href="https://metacpan.org/pod/Beam::Wire" rel="external">Beam::Wire</a> container. This means that any object attributes (in the <code>ATTRIBUTES</code> section of their documentation) can be set from the config file. Some examples are below:</p>

<h2 id="Custom-Markdown">Custom Markdown</h2>

<p>To use a custom Markdown parser, like <a href="https://metacpan.org/pod/Text::MultiMarkdown" rel="external">Text::MultiMarkdown</a>, which has <a href="https://rawgit.com/fletcher/human-markdown-reference/master/index.html" rel="external">some extra syntax features</a>, you can use the <a href="/Statocles/pod/Statocles/Site#markdown/">site object&#39;s <code>markdown</code> attribute</a> to configure a custom object with <code>$class</code> and optional <code>$args</code>:</p>

<pre><code>    # site.yml
    site:
        class: Statocles::Site
        args:
            # ...
            markdown:
                $class: Text::MultiMarkdown
                $args:
                    use_metadata: false</code></pre>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<dl>

<dt><a href="/Statocles/pod/Statocles/Help/Content/">Statocles::Help::Content - How to edit content with Statocles</a></dt>
<dd>

</dd>
<dt><a href="/Statocles/pod/Statocles/Help/Deploy/">Statocles::Help::Deploy - How to deploy a Statocles site</a></dt>
<dd>

</dd>
<dt><a href="/Statocles/pod/Statocles/Help/Theme/">Statocles::Help::Theme - How to customize a Statocles theme</a></dt>
<dd>

</dd>
</dl>



        </div>
        <footer>
            <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61295159-3', 'auto');
  ga('send', 'pageview');

</script>

            <div class="container tagline">
                <a href="http://preaction.github.io/Statocles">Made with Statocles</a><br>
                <a href="http://www.perl.org">Powered by Perl</a>
            </div>
        </footer>
    </body>
</html>
